---
import type { GetStaticPaths, Page } from 'astro'
import type { CollectionEntry } from 'astro:content'
import { listsConfig } from '~/config'
import { getAllPosts } from '~/lib/data'
import List from '~/layouts/components/Main/Lists/PostsList.astro'

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const sortedPosts = await getAllPosts()

  return paginate(sortedPosts, {
    pageSize: listsConfig.postsList.pagination.eachPageSize,
  })
}

interface Props {
  page: Page<CollectionEntry<'posts'>>
}

const { page } = Astro.props
---

<List {page} title={listsConfig.postsList.title} description={listsConfig.postsList.description} baseUrl="/posts" />
